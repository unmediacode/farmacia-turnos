---
import { weekDays } from '@/lib/utils/date';
import dayjs from 'dayjs';
const { dateKey, data } = Astro.props as { dateKey: string; data: Record<string, any[]> };
const days = weekDays(dateKey);
---
<div class="grid grid-cols-5 gap-4">
  {days.map((d) => (
    <section class="border rounded-md p-3 border-slate-200 dark:border-slate-700">
      <header class="flex items-center justify-between mb-2">
        <div class="font-semibold">{dayjs(d).format('ddd DD/MM')}</div>
        <div class="text-xs">{(data[d]?.length ?? 0)}/10</div>
      </header>
      <ul class="space-y-2 min-h-24">
        {(data[d] ?? []).map((a) => (
          <li class="flex items-center justify-between rounded bg-slate-50 dark:bg-slate-800 px-2 py-1">
            <div>
              <div class="text-sm font-medium">{a.name}</div>
              {a.phone && <div class="text-xs text-slate-500">{a.phone}</div>}
            </div>
            <div class="flex gap-1">
              <button class="btn-outline text-xs" data-edit={a.id}>Editar</button>
              <button class="btn-outline text-xs" data-delete={a.id}>Borrar</button>
            </div>
          </li>
        ))}
      </ul>
      <button class="btn w-full mt-3" data-add={d}>AÃ±adir</button>
    </section>
  ))}
</div>
